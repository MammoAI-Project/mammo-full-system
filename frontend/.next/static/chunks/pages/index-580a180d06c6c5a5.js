(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2936:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(8921)}])},8921:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>z});var n=t(7876),i=t(4232),r=t(6520),a=t(4077),o=t(6167),l=t(1054),c=t(8116),d=t(7328),h=t.n(d),x=t(964);function m(e){let{children:s,title:t="MammoAI - Breast Cancer Analysis Tool"}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(h(),{children:[(0,n.jsx)("title",{children:t}),(0,n.jsx)("meta",{name:"description",content:"AI-powered breast cancer analysis from mammogram images"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,n.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"})]}),(0,n.jsx)(x.A,{maxWidth:"lg",children:s})]})}var j=t(1702),u=t(9299),A=t(6453),p=t(4132);function g(e){let{threshold:s,setThreshold:t,showDescriptions:i,setShowDescriptions:o,showRecommendations:c,setShowRecommendations:d}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.A,{elevation:2,sx:{p:2,mb:2},children:[(0,n.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Configuration"}),(0,n.jsxs)(a.A,{id:"threshold-slider",gutterBottom:!0,children:["Confidence Threshold: ",s]}),(0,n.jsx)(j.Ay,{value:s,onChange:(e,s)=>t(s),min:.5,max:.95,step:.01,"aria-labelledby":"threshold-slider"}),(0,n.jsx)(a.A,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Predictions with confidence below this threshold will be marked for review"}),(0,n.jsx)(u.A,{sx:{my:2}}),(0,n.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Display Options"}),(0,n.jsx)(A.A,{control:(0,n.jsx)(p.A,{checked:i,onChange:e=>o(e.target.checked)}),label:"Show BI-RADS Descriptions"}),(0,n.jsx)(A.A,{control:(0,n.jsx)(p.A,{checked:c,onChange:e=>d(e.target.checked)}),label:"Show Recommendations"}),(0,n.jsx)(u.A,{sx:{my:2}}),(0,n.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"BI-RADS Categories"}),(0,n.jsxs)(r.A,{sx:{mt:1},children:[(0,n.jsxs)(a.A,{variant:"body2",children:[(0,n.jsx)("strong",{children:"CL 1:"})," Normal"]}),(0,n.jsxs)(a.A,{variant:"body2",children:[(0,n.jsx)("strong",{children:"CL 3:"})," Probably benign"]}),(0,n.jsxs)(a.A,{variant:"body2",children:[(0,n.jsx)("strong",{children:"CL 4:"})," Suspicious"]}),(0,n.jsxs)(a.A,{variant:"body2",children:[(0,n.jsx)("strong",{children:"CL 5:"})," Highly suspicious"]})]})]}),(0,n.jsx)(l.A,{elevation:2,sx:{p:2,mt:2},children:(0,n.jsx)(a.A,{variant:"caption",color:"text.secondary",children:"This tool is for medical professional use only. AI analysis is meant to assist, not replace, clinical judgment."})})]})}var f=t(2643),v=t(5965);function y(e){let{onFileChange:s,onAnalyze:t,file:i,error:r,loading:c}=e;return(0,n.jsxs)(l.A,{elevation:3,sx:{p:3,mb:3},children:[(0,n.jsx)("input",{type:"file",id:"upload-input",accept:"image/jpeg,image/jpg,image/png",onChange:s,style:{display:"none"}}),(0,n.jsx)("label",{htmlFor:"upload-input",children:(0,n.jsx)(f.A,{variant:"contained",component:"span",fullWidth:!0,sx:{mb:2},children:"Upload Mammogram Image"})}),r&&(0,n.jsx)(o.A,{severity:"error",sx:{mb:2},children:r}),i&&(0,n.jsxs)(a.A,{variant:"body2",sx:{mb:2},children:["Selected file: ",i.name]}),(0,n.jsx)(f.A,{variant:"contained",color:"primary",onClick:t,disabled:!i||c,fullWidth:!0,children:c?(0,n.jsx)(v.A,{size:24,color:"inherit"}):"Analyze Image"})]})}var b=t(2460),w=t(2482),C=t(2039),F=t(451),S=t(1413),k=t(4676),L=t(9858),B=t(3085),D=t(7366),I=t(2224),_=t(2558),R=t(8638);function P(e){let{branch:s,data:t,showDescriptions:i,showRecommendations:l}=e,c=e=>{switch(e){case"CL1":return"#4CAF50";case"CL3":return"#FF9800";case"CL4":return"#F44336";case"CL5":return"#D32F2F";default:return"#757575"}},d=e=>{switch(e){case"CL1":return{text:"Routine screening as per guidelines",severity:"success",icon:(0,n.jsx)(D.A,{})};case"CL3":return{text:"Follow-up examination in 6 months",severity:"info",icon:(0,n.jsx)(_.A,{})};case"CL4":return{text:"Biopsy should be considered",severity:"warning",icon:(0,n.jsx)(R.A,{})};case"CL5":return{text:"Immediate biopsy and consultation",severity:"error",icon:(0,n.jsx)(I.A,{})};default:return{text:"Consult healthcare professional",severity:"info",icon:(0,n.jsx)(_.A,{})}}};return(0,n.jsxs)(b.A,{elevation:3,sx:{borderLeft:"5px solid ".concat(t.needs_review?"#F44336":t.confidence>.8?"#4CAF50":"#FF9800"),height:"100%"},children:[(0,n.jsx)(w.A,{title:s}),(0,n.jsxs)(C.A,{children:[(0,n.jsx)(F.A,{size:"small",children:(0,n.jsxs)(S.A,{children:[(0,n.jsxs)(k.A,{children:[(0,n.jsx)(L.A,{component:"th",scope:"row",children:"Prediction:"}),(0,n.jsx)(L.A,{children:(0,n.jsx)(B.A,{label:t.prediction,sx:{bgcolor:c(t.prediction)+"20",color:c(t.prediction),fontWeight:"bold"}})})]}),i&&(0,n.jsxs)(k.A,{children:[(0,n.jsx)(L.A,{component:"th",scope:"row",children:"Description:"}),(0,n.jsx)(L.A,{children:t.description})]}),(0,n.jsxs)(k.A,{children:[(0,n.jsx)(L.A,{component:"th",scope:"row",children:"Confidence:"}),(0,n.jsxs)(L.A,{children:[(100*t.confidence).toFixed(1),"%"]})]}),(0,n.jsxs)(k.A,{children:[(0,n.jsx)(L.A,{component:"th",scope:"row",children:"Uncertainty:"}),(0,n.jsx)(L.A,{children:t.uncertainty.toFixed(3)})]}),(0,n.jsxs)(k.A,{children:[(0,n.jsx)(L.A,{component:"th",scope:"row",children:"Status:"}),(0,n.jsx)(L.A,{children:(0,n.jsx)(a.A,{color:t.needs_review?"error":"success",fontWeight:"medium",children:t.needs_review?"Needs Review":"Confident Prediction"})})]})]})}),l&&(0,n.jsx)(r.A,{sx:{mt:2},children:(0,n.jsxs)(o.A,{severity:d(t.prediction).severity,icon:d(t.prediction).icon,children:[(0,n.jsx)("strong",{children:"Recommendation:"})," ",d(t.prediction).text]})})]})]})}function T(e){let{summary:s,totalBranches:t}=e,i=e=>{switch(e){case"CL1":return"#4CAF50";case"CL3":return"#FF9800";case"CL4":return"#F44336";case"CL5":return"#D32F2F";default:return"#757575"}};return(0,n.jsx)(c.A,{container:!0,spacing:2,children:Object.entries(s).map(e=>{let[s,r]=e;return(0,n.jsx)(c.A,{item:!0,xs:6,sm:3,children:(0,n.jsxs)(l.A,{elevation:1,sx:{p:2,textAlign:"center",borderLeft:"5px solid ".concat(i(s)),bgcolor:i(s)+"10"},children:[(0,n.jsx)(a.A,{variant:"h5",sx:{color:i(s)},children:s}),(0,n.jsxs)(a.A,{variant:"h4",children:[r,"/",t]}),(0,n.jsx)(a.A,{variant:"caption",children:"branches"})]})},s)})})}function E(e){let{needsReview:s,avgConfidence:t}=e;return(0,n.jsx)(r.A,{children:s?(0,n.jsx)(o.A,{severity:"error",icon:(0,n.jsx)(I.A,{}),children:(0,n.jsx)(a.A,{variant:"subtitle1",children:"⚠️ This case needs review by a healthcare professional"})}):t>.8?(0,n.jsx)(o.A,{severity:"success",icon:(0,n.jsx)(D.A,{}),children:(0,n.jsx)(a.A,{variant:"subtitle1",children:"✅ High confidence predictions across all branches"})}):(0,n.jsx)(o.A,{severity:"warning",icon:(0,n.jsx)(R.A,{}),children:(0,n.jsx)(a.A,{variant:"subtitle1",children:"⚠️ Moderate confidence predictions, consider secondary review"})})})}let N=t(5364).env.NEXT_PUBLIC_API_URL||"http://localhost:8000";function z(){let[e,s]=(0,i.useState)(null),[t,d]=(0,i.useState)(null),[h,x]=(0,i.useState)(!1),[j,u]=(0,i.useState)(null),[A,p]=(0,i.useState)(.7),[f,v]=(0,i.useState)(!0),[b,w]=(0,i.useState)(!0),[C,F]=(0,i.useState)({}),[S,k]=(0,i.useState)(null),[L,B]=(0,i.useState)("");(0,i.useEffect)(()=>{B(new Date().toLocaleString())},[]),(0,i.useEffect)(()=>{fetch("".concat(N,"/api/birads-descriptions")).then(e=>e.json()).then(e=>F(e)).catch(e=>console.error("Error fetching BIRADS descriptions:",e))},[]);let D=async()=>{if(!e)return void k("Please upload an image first.");x(!0),k(null);try{let s=new FormData;s.append("file",e),s.append("threshold",A);let t=await fetch("".concat(N,"/api/analyze"),{method:"POST",body:s});if(!t.ok){let e=await t.json();throw Error(e.detail||"Failed to analyze image")}let n=await t.json();u(n)}catch(e){k(e.message)}finally{x(!1)}};return(0,n.jsxs)(m,{children:[(0,n.jsxs)(r.A,{sx:{my:4,textAlign:"center",bgcolor:"#f8f9fa",borderRadius:2,p:3,width:"100%"},children:[(0,n.jsx)(a.A,{variant:"h3",component:"h1",gutterBottom:!0,sx:{color:"#2c3e50"},children:"MammoAI"}),(0,n.jsx)(a.A,{variant:"h5",component:"h2",gutterBottom:!0,sx:{color:"#2c3e50"},children:"Breast Cancer Analysis Tool"}),(0,n.jsx)(a.A,{variant:"body1",sx:{color:"#34495e",fontSize:"1.1rem"},children:"This application analyzes mammogram images using AI to assist in breast cancer detection and risk assessment. The tool evaluates images across multiple diagnostic branches including Risk Assessment, Cancer Detection, Cancer Staging, Risk Factor Analysis, and Differential Diagnosis."})]}),(0,n.jsx)(o.A,{severity:"info",sx:{mb:4,width:"100%"},children:"\uD83D\uDC49 Upload a mammogram image below to begin analysis."}),(0,n.jsxs)(r.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:4},children:[(0,n.jsx)(r.A,{sx:{width:{xs:"100%",md:"280px"},flexShrink:0,position:{xs:"static",md:"sticky"},top:{xs:0,md:"20px"},alignSelf:"flex-start",height:"fit-content"},children:(0,n.jsxs)(l.A,{elevation:3,sx:{p:3},children:[(0,n.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Configuration"}),(0,n.jsx)(g,{threshold:A,setThreshold:p,showDescriptions:f,setShowDescriptions:v,showRecommendations:b,setShowRecommendations:w})]})}),(0,n.jsxs)(r.A,{sx:{flexGrow:1},children:[(0,n.jsxs)(l.A,{elevation:3,sx:{p:3,mb:4},children:[(0,n.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Upload Mammogram"}),(0,n.jsx)(y,{onFileChange:e=>{let t=e.target.files[0];if(t){if(!["image/jpeg","image/jpg","image/png"].includes(t.type)){k("Invalid file format. Please upload a JPG, JPEG, or PNG image."),s(null),d(null);return}s(t),k(null);let e=new FileReader;e.onloadend=()=>{d(e.result)},e.readAsDataURL(t)}},onAnalyze:D,file:e,error:S,loading:h})]}),t&&(0,n.jsxs)(c.A,{container:!0,spacing:3,children:[(0,n.jsx)(c.A,{item:!0,xs:12,md:6,children:(0,n.jsxs)(l.A,{elevation:2,sx:{p:2},children:[(0,n.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Uploaded Image"}),(0,n.jsx)(r.A,{sx:{position:"relative",width:"100%",height:300},children:(0,n.jsx)("img",{src:t,alt:"Preview",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",display:"block",margin:"0 auto"}})})]})}),j&&(0,n.jsx)(c.A,{item:!0,xs:12,md:6,children:(0,n.jsxs)(l.A,{elevation:2,sx:{p:2},children:[(0,n.jsx)(a.A,{variant:"h6",gutterBottom:!0,children:"Region of Interest"}),(0,n.jsx)(r.A,{sx:{position:"relative",width:"100%",height:300},children:(0,n.jsx)("img",{src:"data:image/jpeg;base64,".concat(j.gradcam_image),alt:"Heatmap",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",display:"block",margin:"0 auto"}})}),(0,n.jsx)(a.A,{variant:"caption",sx:{mt:1,display:"block",fontStyle:"italic"},children:"Areas highlighted in red have the strongest influence on the model's predictions"})]})})]}),j&&(0,n.jsxs)(r.A,{sx:{mt:4},children:[(0,n.jsx)(a.A,{variant:"h5",gutterBottom:!0,children:"Analysis Results"}),(0,n.jsx)(c.A,{container:!0,spacing:3,children:Object.entries(j.results).map(e=>{let[s,t]=e;return(0,n.jsx)(c.A,{item:!0,xs:12,md:6,children:(0,n.jsx)(P,{branch:s,data:t,showDescriptions:f,showRecommendations:b})},s)})}),(0,n.jsxs)(r.A,{sx:{mt:4},children:[(0,n.jsx)(a.A,{variant:"h5",gutterBottom:!0,children:"Summary Statistics"}),(0,n.jsx)(T,{summary:j.summary,totalBranches:Object.keys(j.results).length})]}),(0,n.jsxs)(r.A,{sx:{mt:4},children:[(0,n.jsx)(a.A,{variant:"h5",gutterBottom:!0,children:"Overall Assessment"}),(0,n.jsx)(E,{needsReview:j.needs_review,avgConfidence:j.avg_confidence})]})]})]})]}),(0,n.jsxs)(r.A,{component:"footer",sx:{mt:6,mb:3,p:3,bgcolor:"#f8f9fa",borderRadius:2,borderTop:"3px solid #e9ecef",textAlign:"center"},children:[(0,n.jsx)(a.A,{variant:"caption",color:"text.secondary",children:"This tool is generated by an AI system and should be reviewed by a qualified healthcare professional before making any medical decisions. AI analysis is meant to assist, not replace, professional medical judgment."}),(0,n.jsxs)(a.A,{variant:"caption",display:"block",color:"text.secondary",sx:{mt:1},children:["\xa9 Medical Imaging AI Tools - Generated on ",L]})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[341,636,593,792],()=>s(2936)),_N_E=e.O()}]);